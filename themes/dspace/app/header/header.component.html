<header>
  <div class="container">
    <div class="d-flex flex-row justify-content-between align-items-center">
      <!-- Left section: Tholkudi Logo -->
      <a class="navbar-brand my-2" routerLink="/home">
        <img [src]="currentLogo.src" [alt]="currentLogo.alt" class="tholkudi-logo"/>
      </a>

      <!-- Right section: Navigation + User controls -->
      <nav role="navigation" [attr.aria-label]="'nav.user.description' | translate"
           class="navbar navbar-light navbar-expand-md flex-shrink-0 px-0 d-flex align-items-center">

        <!-- Desktop Navigation - visible on desktop only -->
        <div class="d-none d-md-flex align-items-center me-3">
          <!-- Browse Tholkudi Dropdown -->
          <div class="dropdown me-2" ngbDropdown>
            <button class="nav-button dropdown-toggle" type="button" 
                    id="browseDropdown" ngbDropdownToggle
                    [attr.aria-label]="'Browse Tholkudi'">
              Browse Tholkudi
            </button>
            <div class="dropdown-menu" ngbDropdownMenu aria-labelledby="browseDropdown">
              <a class="dropdown-item" (click)="navigateToBrowse('author')">{{ 'browse.comcol.by.author' | translate }}</a>
              <a class="dropdown-item" (click)="navigateToBrowse('title')">{{ 'browse.comcol.by.title' | translate }}</a>
              <a class="dropdown-item" (click)="navigateToBrowse('subject')">{{ 'browse.comcol.by.subject' | translate }}</a>
              <a class="dropdown-item" (click)="navigateToBrowse('language')">{{ 'browse.comcol.by.language' | translate }}</a>
              <a class="dropdown-item" (click)="navigateToBrowse('media')">{{ 'browse.comcol.by.media' | translate }}</a>
              <a class="dropdown-item" (click)="navigateToBrowse('linguistictype')">{{ 'browse.comcol.by.linguistictype' | translate }}</a>
            </div>
          </div>

          <!-- About us Button (simple link) -->
          <a routerLink="/about-us" class="nav-button me-2"
             [attr.aria-label]="'About us'"
             role="menuitem">
            About us
          </a>

          <!-- Tribal Languages Button (simple link) -->
          <a routerLink="/tribal_lg" class="nav-button me-2"
             [attr.aria-label]="'Tribal Languages'"
             role="menuitem">
            Tribal Languages
          </a>

          <!-- Tamil Nadu Tribes Button (simple link) -->
          <a routerLink="/community-list" class="nav-button me-2"
             [attr.aria-label]="'Tamil Nadu Tribes'"
             role="menuitem">
            Tamil Nadu Tribes
          </a>

          <!-- Search Icon - between Tamil Nadu Tribes and login buttons -->
          <ds-search-navbar class="search-navbar-wrapper"></ds-search-navbar>
        </div>

        <!-- Desktop User controls - visible on desktop only -->
        <div class="d-none d-md-flex user-controls-wrapper">
          <ds-auth-nav-menu></ds-auth-nav-menu>
          <ds-context-help-toggle></ds-context-help-toggle>
          <ds-lang-switch></ds-lang-switch>
          <ds-impersonate-navbar></ds-impersonate-navbar>
        </div>

        <!-- Mobile controls - language translator, search icon, and hamburger -->
        <div class="d-md-none d-flex align-items-center">
          <!-- Language translator - visible on mobile, left of search -->
          <div class="mobile-lang-switch me-2">
            <ds-lang-switch></ds-lang-switch>
          </div>

          <!-- Search Icon - between translator and hamburger -->
          <div class="mobile-search-icon me-2">
            <ds-search-navbar class="mobile-header-search"></ds-search-navbar>
          </div>

          <!-- Mobile hamburger button -->
          <button class="navbar-toggler" type="button"
                  (click)="toggleMobileMenu()"
                  [attr.aria-expanded]="isMobileMenuOpen"
                  aria-controls="mobile-nav-menu"
                  [attr.aria-label]="'nav.toggle' | translate">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </nav>
    </div>

    <!-- Mobile navigation menu (collapsible) -->
    <div class="mobile-nav-collapse d-md-none"
         id="mobile-nav-menu"
         [class.show]="isMobileMenuOpen">
      <div class="mobile-nav-content">
        <!-- Navigation Links Section -->
        <div class="mobile-nav-section">
          <!-- Browse Tholkudi dropdown for mobile -->
          <div class="mobile-dropdown-section">
            <button class="mobile-dropdown-header" 
                    type="button"
                    (click)="toggleMobileBrowseDropdown()"
                    [attr.aria-expanded]="isMobileBrowseOpen"
                    aria-controls="mobile-browse-dropdown">
              Browse Tholkudi
              <span class="dropdown-arrow" [class.rotated]="isMobileBrowseOpen">â–¼</span>
            </button>
            <div class="mobile-dropdown-items" 
                 id="mobile-browse-dropdown"
                 [class.show]="isMobileBrowseOpen">
              <a class="mobile-nav-link mobile-sub-link"
                 [attr.aria-label]="'browse.comcol.by.author' | translate"
                 (click)="navigateToBrowse('author'); closeMobileMenu()">
                {{ 'browse.comcol.by.author' | translate }}
              </a>
              <a class="mobile-nav-link mobile-sub-link"
                 [attr.aria-label]="'browse.comcol.by.title' | translate"
                 (click)="navigateToBrowse('title'); closeMobileMenu()">
                {{ 'browse.comcol.by.title' | translate }}
              </a>
              <a class="mobile-nav-link mobile-sub-link"
                 [attr.aria-label]="'browse.comcol.by.subject' | translate"
                 (click)="navigateToBrowse('subject'); closeMobileMenu()">
                {{ 'browse.comcol.by.subject' | translate }}
              </a>
              <a class="mobile-nav-link mobile-sub-link"
                 [attr.aria-label]="'browse.comcol.by.language' | translate"
                 (click)="navigateToBrowse('language'); closeMobileMenu()">
                {{ 'browse.comcol.by.language' | translate }}
              </a>
              <a class="mobile-nav-link mobile-sub-link"
                 [attr.aria-label]="'browse.comcol.by.media' | translate"
                 (click)="navigateToBrowse('media'); closeMobileMenu()">
                {{ 'browse.comcol.by.media' | translate }}
              </a>
              <a class="mobile-nav-link mobile-sub-link"
                 [attr.aria-label]="'browse.comcol.by.linguistictype' | translate"
                 (click)="navigateToBrowse('linguistictype'); closeMobileMenu()">
                {{ 'browse.comcol.by.linguistictype' | translate }}
              </a>
            </div>
          </div>

          <a routerLink="/about-us" class="mobile-nav-link"
             [attr.aria-label]="'About us'"
             (click)="closeMobileMenu()">
            About us
          </a>

          <a routerLink="/tribal_lg" class="mobile-nav-link"
             [attr.aria-label]="'Tribal Languages'"
             (click)="closeMobileMenu()">
            Tribal Languages
          </a>

          <a routerLink="/community-list" class="mobile-nav-link"
             [attr.aria-label]="'Tamil Nadu Tribes'"
             (click)="closeMobileMenu()">
            Tamil Nadu Tribes
          </a>


          <!-- Login as navigation link -->
          <div class="mobile-auth-nav-wrapper">
            <ds-auth-nav-menu class="mobile-auth-nav"></ds-auth-nav-menu>
          </div>
        </div>

        <!-- Other Controls Section -->
        <div class="mobile-nav-section mobile-other-controls">
          <ds-context-help-toggle></ds-context-help-toggle>
          <ds-impersonate-navbar></ds-impersonate-navbar>
        </div>
      </div>
    </div>
  </div>
</header>
